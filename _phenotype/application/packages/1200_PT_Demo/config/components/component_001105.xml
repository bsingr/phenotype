<?xml version="1.0" encoding="ISO-8859-1" ?>
<phenotype>
	<meta>
		<ptversion>##!PT_VERSION!##</ptversion>
		<ptsubversion>##!BUILD_NO!##</ptsubversion>	
		<com_id>1105</com_id>
		<com_bez>Tabelle</com_bez>		
		<com_rubrik>Demonstration</com_rubrik>
		<com_description></com_description>
	</meta>
	<script>&#60;? 
class PhenotypeComponent_1105 extends PhenotypeComponent
{
	var $tool_type = 1105;
	var $bez = &#34;Tabelle&#34;;

	function setDefaultProperties()
	{
		$this-&#62;set(&#34;style&#34;,1);
		$this-&#62;set(&#34;width&#34;,500);
		$this-&#62;set(&#34;anzahl_x&#34;,3);
		$this-&#62;set(&#34;anzahl_y&#34;,3);
		$this-&#62;set(&#34;tcon_x1_y1&#34;,&#34;&#34;);
		$this-&#62;set(&#34;tcon_x1_y2&#34;,&#34;&#34;);
		$this-&#62;set(&#34;tcon_x1_y3&#34;,&#34;&#34;);
		$this-&#62;set(&#34;tcon_x2_y1&#34;,&#34;&#34;);
		$this-&#62;set(&#34;tcon_x2_y2&#34;,&#34;&#34;);
		$this-&#62;set(&#34;tcon_x2_y3&#34;,&#34;&#34;);
		$this-&#62;set(&#34;tcon_x3_y1&#34;,&#34;&#34;);
		$this-&#62;set(&#34;tcon_x3_y2&#34;,&#34;&#34;);
		$this-&#62;set(&#34;tcon_x3_y3&#34;,&#34;&#34;);
	}

	function edit()
	{
		global $myAdm;

		$max_spalten = 10;
		$anzahl_spalten = $this-&#62;get(&#34;anzahl_x&#34;);
        
		
		$this-&#62;form_textfield(&#34;Überschrift&#34;,&#34;headline&#34;,$this-&#62;get(&#34;headline&#34;));
		?&#62; 
		&#60;input type=&#34;hidden&#34; name=&#34;&#60;?=$this-&#62;formid?&#62;_anzahl&#34; value=&#34;&#60;?=$this-&#62;get(&#34;anzahl&#34;)?&#62;&#34;&#62; 
        &#60;br&#47;&#62;&#60;br&#47;&#62;
        &#60;table width=&#34;408&#34; border=&#34;0&#34; cellpadding=&#34;0&#34; cellspacing=&#34;0&#34; class=&#34;tableBausteineBackground&#34;&#62; 
        &#60;tr&#62; 
        &#60;? 
        $x = ceil(73&#47;$anzahl_spalten);
        for ($j=1;$j&#60;=$this-&#62;get(&#34;anzahl_x&#34;);$j++)
        {
        ?&#62;         
        &#60;td width=&#34;&#60;?=$x?&#62;%&#34;&#62;&#60;?if ($this-&#62;get(&#34;anzahl_x&#34;)&#62;1){?&#62;&#60;input type=&#34;image&#34; src=&#34;img&#47;b_minus.gif&#34; alt=&#34;Spalte entfernen&#34; width=&#34;18&#34; height=&#34;18&#34; border=&#34;0&#34; name=&#34;&#60;?=$this-&#62;formid?&#62;_minus_s&#60;?=$j?&#62;&#34;&#62;&#60;?}?&#62;&#60;?if($anzahl_spalten&#60;$max_spalten){?&#62;&#60;input type=&#34;image&#34; src=&#34;img&#47;b_plus.gif&#34; alt=&#34;Spalte hinzuf&#38;uuml;gen&#34; width=&#34;18&#34; height=&#34;18&#34; border=&#34;0&#34; name=&#34;&#60;?=$this-&#62;formid?&#62;_plus_s&#60;?=$j?&#62;&#34;&#62;&#60;?}?&#62;&#60;&#47;td&#62; 
        
        &#60;&#47;td&#62; 
        &#60;? 
        }
        ?&#62; 
        &#60;td width=&#34;7%&#34; align=&#34;right&#34; nowrap&#62;&#60;!--&#60;img src=&#34;img&#47;b_text_bigwin.gif&#34; alt=&#34;Tabelleneditor vergr&#38;ouml;&#38;szlig;ern&#34; width=&#34;22&#34; height=&#34;22&#34; border=&#34;0&#34;&#62;--&#62;&#60;&#47;td&#62; 
        &#60;&#47;tr&#62; 
        
        &#60;? 
        for ($i=1;$i&#60;=$this-&#62;get(&#34;anzahl_y&#34;);$i++)
        {
        ?&#62; 
        &#60;tr&#62; 
        &#60;? 
        for ($j=1;$j&#60;=$this-&#62;get(&#34;anzahl_x&#34;);$j++)
        {
        ?&#62; 
        &#60;td&#62;&#60;textarea name=&#34;&#60;?=$this-&#62;formid?&#62;_tcon_x&#60;?=$j?&#62;_y&#60;?=$i?&#62;&#34; class=&#34;input&#34; style=&#34;width: 90%;height: 55px&#34;&#62;&#60;?=$this-&#62;getH(&#34;tcon_x&#34;.$j.&#34;_y&#34;.$i)?&#62;&#60;&#47;textarea&#62;&#60;&#47;td&#62; 
        &#60;? 
        }
        ?&#62; 
        &#60;td  nowrap&#62; 
        &#60;?if ($this-&#62;get(&#34;anzahl_y&#34;)&#62;1){?&#62; 
        &#60;input type=&#34;image&#34; src=&#34;img&#47;b_minus.gif&#34; alt=&#34;Zeile entfernen&#34; width=&#34;18&#34; height=&#34;18&#34; border=&#34;0&#34; name=&#34;&#60;?=$this-&#62;formid?&#62;_minus_z&#60;?=$i?&#62;&#34;&#62;&#60;?}?&#62;&#60;input type=&#34;image&#34; src=&#34;img&#47;b_plus.gif&#34; alt=&#34;Zeile hinzuf&#38;uuml;gen&#34; width=&#34;18&#34; height=&#34;18&#34; border=&#34;0&#34; name=&#34;&#60;?=$this-&#62;formid?&#62;_plus_z&#60;?=$i?&#62;&#34;&#62; 
        &#60;&#47;td&#62; 
        
        &#60;&#47;tr&#62; 
        &#60;? 
        }
          ?&#62; 
         &#60;&#47;table&#62;&#60;br&#47;&#62; 
         &#60;? 
         $this-&#62;form_textfield(&#34;Breite (Pixel)&#34;,&#34;width&#34;,$this-&#62;get(&#34;width&#34;),50);
	}

	function update()
	{
		$this-&#62;fset(&#34;width&#34;);
		$this-&#62;fset(&#34;headline&#34;);
		
		$anzahl_y = $this-&#62;get(&#34;anzahl_y&#34;);
		$anzahl_x = $this-&#62;get(&#34;anzahl_x&#34;);
		$put_y=1;
		for ($i=1;$i&#60;=$anzahl_y;$i++)
		{
			$put_x = 1;
			for ($j=1;$j&#60;=$anzahl_x;$j++)
			{
				$fname = &#34;_tcon_x&#34; . $j . &#34;_y&#34; . $i;
				$this-&#62;fset(&#34;tcon_x&#34; . $put_x . &#34;_y&#34; . $put_y,$fname);
				$put_x++;

			}
			$put_y++;

			&#47;&#47; Wurde eine Zeile hinzugefuegt ?
			$fname = $this-&#62;formid . &#34;_plus_z&#34; . $i . &#34;_x&#34;;
			if (isset($_REQUEST[$fname]))
			{
				$this-&#62;set(&#34;anzahl_y&#34;,$anzahl_y+1);
				for ($k=1;$k&#60;=$anzahl_x;$k++)
				{
					$this-&#62;set(&#34;tcon_x&#34; . $k . &#34;_y&#34; . $put_y,&#34;&#34;);
				}
				$put_y++;
			}
			&#47;&#47; -- Wurde eine Zeile hinzugefuegt ?

			&#47;&#47; Wurde eine Zeile geloescht ?
			$fname = $this-&#62;formid . &#34;_minus_z&#34; . $i . &#34;_x&#34;;
			if (isset($_REQUEST[$fname]))
			{
				$this-&#62;set(&#34;anzahl_y&#34;,$anzahl_y-1);
				$put_y--;
			}
			&#47;&#47; -- Wurde eine Zeile geloescht ?
		}

		&#47;&#47; Check auf Veraenderung der Spaltenanzahl
		for ($i=1;$i&#60;=$anzahl_x;$i++)
		{
			&#47;&#47; Wurde eine Spalte hinzugefuegt ?
			$fname = $this-&#62;formid . &#34;_plus_s&#34; . $i .&#34;_x&#34;;
			if (isset($_REQUEST[$fname]))
			{
				for ($k=$anzahl_x;$k&#62;$i;$k--)
				{
					for ($l=1;$l&#60;=$anzahl_y;$l++)
					{
						$s = $this-&#62;get (&#34;tcon_x&#34; . $k . &#34;_y&#34; .$l);
						$this-&#62;set(&#34;tcon_x&#34; . ($k+1) . &#34;_y&#34; . $l,$s);
					}
				}
				for ($l=1;$l&#60;=$anzahl_y;$l++)
				{
					$this-&#62;set(&#34;tcon_x&#34; . ($i+1) . &#34;_y&#34; . $l,&#34;&#34;);
				}
				$this-&#62;set(&#34;anzahl_x&#34;,$anzahl_x+1);
			}
			&#47;&#47; -- Wurde eine Spalte hinzugefuegt ?

			&#47;&#47; Wurde eine Spalte geloescht ?
			$fname = $this-&#62;formid . &#34;_minus_s&#34; . $i . &#34;_x&#34;;
			if (isset($_REQUEST[$fname]))
			{
				for ($k=$i;$k&#60;$anzahl_x;$k++)
				{
					for ($l=1;$l&#60;=$anzahl_y;$l++)
					{
						$s = $this-&#62;get (&#34;tcon_x&#34; . ($k+1) . &#34;_y&#34; .$l);
						$this-&#62;set(&#34;tcon_x&#34; . ($k) . &#34;_y&#34; . $l,$s);
					}
				}
				$this-&#62;set(&#34;anzahl_x&#34;,$anzahl_x-1);
			}
			&#47;&#47; -- Wurde eine Spalte geloescht ?
		}
	}


	function render($context)
	{
		global $myPT;
		$myPT-&#62;startBuffer();
		?&#62;
        &#60;div class=&#34;table&#34;&#62;
        &#60;?
        if ($this-&#62;get(&#34;headline&#34;)!=&#34;&#34;)
        {
       		?&#62;&#60;h1&#62;&#60;?=$this-&#62;getH(&#34;headline&#34;)?&#62;&#60;&#47;h1&#62;&#60;?
        }
        ?&#62;
        &#60;table width=&#34;&#60;?=$this-&#62;getI(&#34;width&#34;)?&#62;&#34; border=&#34;0&#34; cellpadding=&#34;0&#34; cellspacing=&#34;1&#34; &#62; 
        &#60;? 
        for ($i=1;$i&#60;=$this-&#62;get(&#34;anzahl_y&#34;);$i++)
        {
        ?&#62;
        &#60;tr&#62; 
        &#60;? 
        for ($j=1;$j&#60;=$this-&#62;get(&#34;anzahl_x&#34;);$j++)
        {

        	$td1 = &#39;&#60;td&#62;&#39;;
        	$td2 = &#39;&#60;&#47;td&#62;&#39;;


        	if ($i==1)
        	{
        		$td1 = &#39;&#60;th&#62;&#39;;
        		$td2 = &#39;&#60;&#47;th&#62;&#39;;
        	}
        ?&#62; 
        &#60;?=$td1?&#62;&#60;?=$this-&#62;getH(&#34;tcon_x&#34;.$j.&#34;_y&#34;.$i);?&#62;&#60;?=$td2?&#62;
        &#60;? 
        }
        ?&#62; 
        &#60;&#47;tr&#62; 
        &#60;?         
        }
        ?&#62; 
        &#60;&#47;table&#62;
        &#60;&#47;div&#62;
        &#60;?

        $html = $myPT-&#62;stopBuffer();
        return $html;
	}

}
?&#62;</script>
	<templates>
   	</templates>
	<componentgroups><group>
			<cog_id>1</cog_id>
			<cog_bez>Default</cog_bez>
			<cog_description>## Default-Bausteingruppe</cog_description>
			<cog_pos>0</cog_pos>
		  </group></componentgroups>
</phenotype>
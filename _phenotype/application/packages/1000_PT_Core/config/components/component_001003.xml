<?xml version="1.0" encoding="ISO-8859-1" ?>
<phenotype>
	<meta>
		<ptversion>##!PT_VERSION!##</ptversion>
		<ptsubversion>##!BUILD_NO!##</ptsubversion>	
		<com_id>1003</com_id>
		<com_bez>Include</com_bez>		
		<com_rubrik>System</com_rubrik>
		<com_description>## Baustein 1003 - Include</com_description>
	</meta>
	<script>&#60;?php php &#10;class PhenotypeComponent_1003 extends PhenotypeComponent &#10;{ &#10;  var $tool_type = 1003; &#10;  var $bez=&#34;Include&#34;;&#10;&#10;&#10;  function setDefaultProperties() &#10;  { &#10;      $this-&#62;set(&#34;inc_id&#34;,&#34;0&#34;); &#10;&#9;  $this-&#62;set(&#34;cache&#34;,&#34;1&#34;);&#10;  } &#10;    &#10;  function edit() &#10;  { &#10;    global $myDB; &#10;&#10;  ?&#62;       &#60;select name=&#34;&#60;?php php php echo $this-&#62;formid ?&#62;inc_id&#34; class=&#34;input&#34; style=&#34;width:300px&#34;&#62; &#10;      &#60;option value=&#34;0&#34;&#62;...&#60;&#47;option&#62; &#10;      &#60;?php php &#10;      $sql = &#34;SELECT * FROM include WHERE inc_usage_includecomponent = 1 ORDER BY inc_rubrik,inc_bez&#34;; &#10;      $rs = $myDB-&#62;query($sql); &#10;      while ($row=mysql_fetch_array($rs)) &#10;      { &#10;        $selected = &#34;&#34;; &#10;        if ($row[&#34;inc_id&#34;]==$this-&#62;get(&#34;inc_id&#34;)){$selected = &#34;selected&#34;;} &#10;      ?&#62; &#10;      &#60;option &#60;?php php php echo $selected ?&#62; value=&#34;&#60;?php php php echo $row[&#34;inc_id&#34;] ?&#62;&#34;&#62;&#60;?php php php echo $row[&#34;inc_rubrik&#34;].&#34;: &#34;.$row[&#34;inc_bez&#34;] ?&#62;&#60;&#47;option&#62; &#10;      &#60;?php php &#10;      } &#10;      ?&#62; &#10;      &#60;&#47;select&#62;&#60;br&#62;Cache&#60;br&#62;&#10;&#9;  &#60;select name=&#34;&#60;?php php php echo $this-&#62;formid ?&#62;cache&#34; class=&#34;input&#34; style=&#34;width:80px&#34;&#62; &#10;      &#60;option value=&#34;1&#34; &#62;wie Seite&#60;&#47;option&#62;&#10;&#9;  &#60;option value=&#34;0&#34; &#60;?php php if ($this-&#62;get(&#34;cache&#34;)==&#34;0&#34;){echo &#34;selected&#34;;} ?&#62;&#62;nie&#60;&#47;option&#62;&#10;&#9;  &#60;?php php &#10;  } &#10;&#10;  function update() &#10;  { &#10;    &#47;&#47; Auswertung der Eingabemaske und Setzen der Properties des Tools &#10;    $this-&#62;fset(&#34;inc_id&#34;); &#10;&#9;$this-&#62;fset(&#34;cache&#34;); &#10;  } &#10;    &#10;&#10;  function render($context) &#10;  { &#10;    &#47;&#47; Notwendig, um die Smartyengine richtig zu initialisieren &#10;    eval ($this-&#62;initRendering()); &#10;    &#10;    global $myPage;  &#10;&#10;    $html = &#34;&#34;; &#10;    $inc_id = $this-&#62;get(&#34;inc_id&#34;); &#10;    if ($inc_id!=&#34;0&#34;) &#10;    { &#10;      if ($myPage-&#62;buildingcache==0)&#10;&#9;  {&#10;&#9;    $cname = &#34;PhenotypeInclude_&#34; . $inc_id;&#10;&#9;&#9;$myInc = new $cname();&#10;&#9;    $html = $myInc-&#62;execute();&#10;&#9;  }&#10;&#9;  else&#10;&#9;  {&#10;&#9;    if ($this-&#62;get(&#34;cache&#34;)==1)&#10;&#9;&#9;{&#10;&#9;&#9;  $cname = &#34;PhenotypeInclude_&#34; . $inc_id;&#10;&#9;&#9;  $myInc = new $cname();&#10;&#9;      $html = $myInc-&#62;execute();&#10;&#9;&#9;}&#10;&#9;&#9;else&#10;&#9;&#9;{&#10;&#9;&#9;  $html = &#39;&#60;?$myPage-&#62;includenocache=1 ?&#62;&#39;;&#47;&#47; Notwendig fuer Content-Statistik&#10;&#9;&#9;  $html .= &#39;&#60;?php php $myInc = new PhenotypeInclude_&#39; . $inc_id .&#39;();echo $myInc-&#62;execute() ?&#62;&#39;;&#10;          $html .= &#39;&#60;?php php $myPage-&#62;includenocache=0 ?&#62;&#39;;&#10;&#9;&#9;}&#10;      } &#10;&#9;}  &#10;    return $html;    &#10;  }&#10;  &#10;  function displayXML($style=1)&#10;  {&#10;  &#9; global $myPage;  &#10;  &#9; ?&#62;&#10;  &#9; &#60;component com_id=&#34;1003&#34; type=&#34;Include&#34;&#62;&#10;     &#60;content&#62;&#10;  &#9; &#60;?php php &#10;  &#9; $inc_id = $this-&#62;get(&#34;inc_id&#34;); &#10;     if ($inc_id!=&#34;0&#34;) &#10;     { &#10;&#9;  &#9;  if ($myPage-&#62;buildingcache==0)&#10;&#9;&#9;  {&#10;&#9;&#9;    &#47;&#47;$myInc = new PhenotypeInclude($inc_id);&#10;&#9;&#9;&#9;$cname = &#34;PhenotypeInclude_&#34; . $inc_id;&#10;  &#9;&#9;    $myInc = new $cname();&#10;&#9;   &#9;&#9;$xml = $myInc-&#62;renderXML();&#10;&#9;   &#9;&#9;echo $xml;&#10;&#9;&#9;  }&#10;&#9;&#9;  else&#10;&#9;&#9;  {&#10;&#9;&#9;    if ($this-&#62;get(&#34;cache&#34;)==1)&#10;&#9;&#9;&#9;{&#10;&#9;&#9;&#9;   $cname = &#34;PhenotypeInclude_&#34; . $inc_id;&#10;&#9;&#9;       $myInc = new $cname();&#10;&#9;&#9;&#9;   $xml = $myInc-&#62;renderXML();&#10;&#9;&#9;&#9;   echo $xml;&#10;&#9;&#9;&#9;}&#10;&#9;&#9;&#9;else&#10;&#9;&#9;&#9;{&#10;&#9;&#9;&#9;   echo  &#39;&#60;?$myInc = new PhenotypeInclude_&#39; . $inc_id .&#39;();echo $myInc-&#62;renderXML() ?&#62;&#39;;&#10;  &#10;&#9;&#9;&#9;}&#10;      } &#10;  &#9;  &#10;&#10;     }&#10;     ?&#62;&#10;     &#60;&#47;content&#62;&#10;     &#60;&#47;component&#62;&#10;     &#60;?php php &#10;     return true;&#10;  }  &#10;} &#10; ?&#62;</script>
	<templates>
   	</templates>
	<componentgroups><group>
			<cog_id>1</cog_id>
			<cog_bez>Default</cog_bez>
			<cog_description>## Default-Bausteingruppe</cog_description>
			<cog_pos>0</cog_pos>
		  </group></componentgroups>
</phenotype>
<?xml version="1.0" encoding="ISO-8859-1" ?>
<phenotype>
	<meta>
		<ptversion>##!PT_VERSION!##</ptversion>
		<ptsubversion>##!BUILD_NO!##</ptsubversion>	
		<com_id>1001</com_id>
		<com_bez>Richtextabsatz</com_bez>		
		<com_rubrik>Textbausteine</com_rubrik>
		<com_description>## Baustein 1001 - Richtextabsatz&#10;&#10;Mit diesem Bausteinen können bereits die meisten Anforderungen einer einfachen Website abegedeckt werden. Ein Absatz besteht aus Überschrift, Text, Bild und Link.&#10;&#10;</com_description>
	</meta>
	<script>&#60;? &#10;class PhenotypeComponent_1001 extends PhenotypeComponent&#10;{&#10;&#9;var $tool_type = 1001;&#10;&#9;var $bez = &#34;Richtextabsatz&#34;;&#10;&#10;&#9;function setDefaultProperties()&#10;&#9;{&#10;&#9;&#9;$this-&#62;set(&#34;headline&#34;,&#34;&#34;);&#10;&#9;&#9;$this-&#62;set(&#34;text&#34;,&#34;&#34;);&#10;&#9;&#9;$this-&#62;set(&#34;img_id&#34;,0);&#10;&#9;&#9;$this-&#62;set(&#34;alt&#34;,&#34;&#34;);&#10;&#9;&#9;$this-&#62;set(&#34;bildausrichtung&#34;,&#34;links&#34;);&#10;&#9;&#9;$this-&#62;set(&#34;linkbez&#34;,&#34;&#34;);&#10;&#9;&#9;$this-&#62;set(&#34;linkurl&#34;,&#34;&#34;);&#10;&#9;&#9;$this-&#62;set(&#34;linktarget&#34;,&#34;_self&#34;);&#10;&#9;}&#10;&#10;&#9;function edit()&#10;&#9;{&#10;&#9;&#9;$this-&#62;form_textfield(&#34;Überschrift&#34;,&#34;headline&#34;,$this-&#62;get(&#34;headline&#34;));&#10;&#9;&#9;echo &#34;&#60;br&#62;&#34;;&#10;&#9;&#9;$this-&#62;form_image(&#34;&#34;,$this-&#62;get(&#34;img_id&#34;),-1,1,0,0,$this-&#62;get(&#34;alt&#34;),$this-&#62;get(&#34;bildausrichtung&#34;),2);&#10;&#10;&#10;    ?&#62; &#10;    &#60;br&#62; &#10;    &#60;table width=&#34;408&#34; border=&#34;0&#34; cellpadding=&#34;0&#34; cellspacing=&#34;0&#34; class=&#34;tableBausteineBackground&#34;&#62; &#10;    &#60;tr&#62;&#60;td nowrap&#62; &#10;    &#60;?&#10;    $this-&#62;form_Richtext(&#34;text&#34;,$this-&#62;get(&#34;text&#34;),80,16);&#10;    ?&#62; &#10;    &#60;&#47;td&#62;&#60;&#47;tr&#62;&#60;&#47;table&#62; &#60;br&#62; &#10;    &#60;? &#10;    $this-&#62;form_link(&#34;link&#34;,$this-&#62;get(&#34;linkbez&#34;),$this-&#62;get(&#34;linkurl&#34;),$this-&#62;get(&#34;linktarget&#34;));&#10;    ?&#62;&#10;    &#60;br&#62;Link-Anchor: #t&#60;?=$this-&#62;id?&#62;&#10;    &#60;?&#10;&#9;}&#10;&#10;&#9;function update()&#10;&#9;{&#10;&#9;&#9;global $myApp;&#10;&#9;&#9;&#10;&#9;&#9;&#47;&#47; Auswertung der Eingabemaske und Setzen der Properties des Tools&#10;&#9;&#9;$this-&#62;fset(&#34;headline&#34;,&#34;headline&#34;);&#10;&#9;&#9;$text = $this-&#62;fget(&#34;text&#34;);&#10;&#9;&#9;&#47;&#47; Nur erlaubte Tags !!&#10;&#9;&#9;$text = $myApp-&#62;richtext_strip_tags($text);&#10;&#9;&#9;$this-&#62;set(&#34;text&#34;,$text);&#10;&#9;&#9;$this-&#62;fset(&#34;img_id&#34;,&#34;img_id&#34;);&#10;&#9;&#9;$this-&#62;fset(&#34;bildausrichtung&#34;,&#34;img_align&#34;);&#10;&#9;&#9;if ($this-&#62;get(&#34;img_id&#34;)!=0)&#10;&#9;&#9;{&#10;&#9;&#9;&#9;$this-&#62;fset(&#34;alt&#34;,&#34;img_alt&#34;);&#10;&#9;&#9;}&#10;&#9;&#9;else&#10;&#9;&#9;{&#10;&#9;&#9;&#9;$this-&#62;set(&#34;alt&#34;,&#34;&#34;);&#10;&#9;&#9;}&#10;&#9;&#9;if ($this-&#62;get(&#34;bildausrichtung&#34;)==&#34;&#34;)&#10;&#9;&#9;{&#10;&#9;&#9;&#9;$this-&#62;set(&#34;bildausrichtung&#34;,&#34;links&#34;);&#10;&#9;&#9;}&#10;&#9;&#9;$this-&#62;fset(&#34;linkbez&#34;,&#34;linkbez&#34;);&#10;&#9;&#9;$this-&#62;fset(&#34;linkurl&#34;,&#34;linkurl&#34;);&#10;&#9;&#9;$this-&#62;fset(&#34;linktarget&#34;,&#34;linktarget&#34;);&#10;&#9;}&#10;&#10;&#10;&#9;function setFullSearch()&#10;&#9;{&#10;&#9;&#9;$s = $this-&#62;get(&#34;headline&#34;) . &#34;|&#34; . $this-&#62;get(&#34;text&#34;);&#10;&#9;&#9;return ($s);&#10;&#9;}&#10;&#10;&#9;function render($context)&#10;&#9;{&#10;&#10;&#9;&#9;&#47;&#47; Notwendig, um die Smartyengine richtig zu initialisieren&#10;&#9;&#9;eval ($this-&#62;initRendering());&#10;&#10;&#9;&#9;$template = $TPL_DEFAULT;&#10;&#10;&#9;&#9;switch ($this-&#62;get(&#34;bildausrichtung&#34;))&#10;&#9;&#9;{&#10;&#9;&#9;&#9;case &#34;links&#34;:&#10;&#9;&#9;&#9;&#9;$style = &#34;float:left&#34;;&#10;&#9;&#9;&#9;&#9;break;&#10;&#10;&#9;&#9;&#9;case &#34;rechts&#34;:&#10;&#9;&#9;&#9;&#9;$style = &#34;float:right&#34;;&#10;&#9;&#9;&#9;&#9;break;&#10;&#10;&#9;&#9;&#9;case &#34;mittig&#34;:&#10;&#9;&#9;&#9;&#9;$template = $TPL_TOPIMAGE;&#10;&#9;&#9;&#9;&#9;$style = &#34;&#34;;&#10;&#9;&#9;&#9;&#9;break;&#10;&#9;&#9;}&#10;&#10;&#10;&#10;&#9;&#9;if ($this-&#62;get(&#34;img_id&#34;)!=0)&#10;&#9;&#9;{&#10;&#9;&#9;&#9;$alt = $this-&#62;get(&#34;alt&#34;);&#10;&#9;&#9;&#9;$myImg = new PhenotypeImage($this-&#62;get(&#34;img_id&#34;));&#10;&#9;&#9;&#9;$myImg-&#62;style = $style;&#10;&#10;&#9;&#9;&#9;$mySmarty-&#62;assign(&#34;image&#34;,$myImg-&#62;render($alt));&#10;&#9;&#9;}&#10;&#10;&#9;&#9;$mySmarty-&#62;assign(&#34;headline&#34;,$this-&#62;get(&#34;headline&#34;));&#10;&#9;&#9;$mySmarty-&#62;assign(&#34;text&#34;,$this-&#62;get(&#34;text&#34;));&#10;&#9;&#9;$mySmarty-&#62;assign(&#34;id&#34;,$this-&#62;id);&#10;&#10;&#9;&#9;if ($this-&#62;get(&#34;linkurl&#34;)!=&#34;&#34;)&#10;&#9;&#9;{&#10;&#9;&#9;&#9;$link = &#39;&#38;nbsp;&#60;a href=&#34;&#39;.$this-&#62;get(&#34;linkurl&#34;).&#39;&#34; target=&#34;&#39;.$this-&#62;get(&#34;linktarget&#34;).&#39;&#34;&#62;&#39;.$this-&#62;get(&#34;linkbez&#34;).&#39;&#60;&#47;a&#62;&#39;;&#10;&#9;&#9;&#9;$a= &#39;&#60;a href=&#34;&#39;.$this-&#62;get(&#34;linkurl&#34;).&#39;&#34; target=&#34;&#39;.$this-&#62;get(&#34;linktarget&#34;).&#39;&#34;&#62;&#39;;&#10;&#9;&#9;&#9;$aa = &#39;&#60;&#47;a&#62;&#39;;&#10;&#9;&#9;&#9;$mySmarty-&#62;assign(&#34;a&#34;,$a);&#10;&#9;&#9;&#9;$mySmarty-&#62;assign(&#34;aa&#34;,$aa);&#10;&#9;&#9;&#9;$mySmarty-&#62;assign(&#34;link&#34;,$link);&#10;&#9;&#9;}&#10;&#10;&#9;&#9;return $mySmarty-&#62;fetch($template);&#10;&#10;&#9;}&#10;&#10;}&#10;?&#62;</script>
	<templates>
<template access="TPL_DEFAULT">&#60;div&#62;&#10;&#60;a name=&#34;t{$id}&#34;&#62;&#60;&#47;a&#62;&#10;&#60;h1&#62;{$a}{$headline}{$aa}&#60;&#47;h1&#62;&#10;&#60;p&#62;{$a}{$image}{$aa}{$text}{$link}&#60;&#47;p&#62;&#10;&#60;&#47;div&#62;&#10;&#60;br clear=&#34;all&#34;&#47;&#62;</template>
<template access="TPL_TOPIMAGE">&#60;div&#62;&#10;&#60;a name=&#34;t{$id}&#34;&#62;&#60;&#47;a&#62;&#10;&#60;h1&#62;{$a}{$headline}{$aa}&#60;&#47;h1&#62;&#10;{$a}{$image}{$aa}&#10;&#60;p&#62;{$text}{$link}&#60;&#47;p&#62;&#10;&#60;&#47;div&#62;&#10;&#60;br clear=&#34;all&#34;&#47;&#62;</template>
   	</templates>
	<componentgroups><group>
			<cog_id>1</cog_id>
			<cog_bez>Default</cog_bez>
			<cog_description>## Default-Bausteingruppe</cog_description>
			<cog_pos>0</cog_pos>
		  </group></componentgroups>
</phenotype>